<div>
  <div ng-show="annotations.length > 0">
    <span ng-if="featureStatusFilter === 'new'" class="curs-annotation-sub-heading">
      <span ng-if="!alleleCountFilter">
        New annotations from this session
      </span>
      <span ng-if="alleleCountFilter">
        New {{alleleCountFilter}} allele annotations
      </span>
      <span ng-show="featureFilterDisplayName">
        for {{featureFilterDisplayName}}
      </span>
    </span>
    <span ng-if="featureStatusFilter === 'existing' && annotations !== null && annotations.length > 0"
          class="curs-annotation-sub-heading">
      <span ng-if="!alleleCountFilter">
        Existing annotations
      </span>
      <span ng-if="alleleCountFilter">
        Existing {{alleleCountFilter}} allele annotations
      </span>
      <span ng-show="featureFilterDisplayName">
        for {{featureFilterDisplayName}}
      </span>
    </span>
    <div class="curs-annotation-table">
      <div class="list" ng-switch="annotationType.category">
        <table ng-switch-when="ontology" class="list">
          <thead>
            <tr>
              <th ng-if="multiOrganismMode && annotationType.feature_type !== 'metagenotype'">Species<span ng-if="strainsMode && annotationType.feature_type === 'genotype'"> (strain)</span></th>
              <th ng-if="annotationType.feature_type == 'genotype'">Genes</th>
              <th ng-if="annotationType.feature_type == 'genotype' && !data.hideColumns.genotype_background">Background</th>
              <th ng-if="annotationType.feature_type == 'genotype' && !data.hideColumns.genotype_name">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('genotype_name')">
                  <img ng-if="sortColumn == 'genotype_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Genotype name
                </a>
              </th>
              <th ng-if="annotationType.feature_type == 'genotype' || !featureIdFilter && annotationType.feature_type != 'metagenotype'">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('feature_display_name')">
                  <img ng-if="sortColumn == 'feature_display_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
{{displayAnnotationFeatureType}}
                <span ng-if="annotationType.feature_type == 'genotype'">(allele and expression)</span>
                </a>
              </th>
              <th ng-if="annotationType.feature_type == 'metagenotype'">Pathogen genotype</th>
              <th ng-if="annotationType.feature_type == 'metagenotype'">Host genotype</th>
              <th>
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('term_ontid')">
                  <img ng-if="sortColumn == 'term_ontid'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Term ID
                </a>
              </th>
              <th>
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('term_name')">
                  <img ng-if="sortColumn == 'term_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Term name
                </a>
              </th>
              <th ng-if="!data.hideColumns.evidence_code">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('evidence_code')">
                  <img ng-if="sortColumn == 'evidence_code'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Evidence code
                </a>
              </th>

              <th ng-if="annotationType.can_have_with && !data.hideColumns.with_or_from_identifier">With</th>
              <th ng-if="!data.hideColumns.gene_product_form_id">Gene product form ID</th>
              <th ng-if="annotationType.can_have_conditions && !data.hideColumns.conditions">Conditions</th>
              <th ng-if="!data.hideColumns.qualifiers">Qualifiers</th>
              <th ng-if="!data.hideColumns.term_suggestion">Term suggestion</th>
              <th ng-if="!data.hideColumns.submitter_comment">
               <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('submitter_comment')">
                  <img ng-if="sortColumn == 'submitter_comment'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Comment
               </a>
              </th>
              <th ng-if="!data.hideColumns.figure">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('figure')">
                  <img ng-if="sortColumn == 'figure'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Figure
                </a>
              </th>
              <th ng-if="!data.hideColumns.extension">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('extension')">
                  <img ng-if="sortColumn == 'extension'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  <span ng-show="flyBaseMode">Phenotype extensions</span>
                  <span ng-hide="flyBaseMode">Annotation extension</span>
                </a>
              </th>
              <th ng-if="!data.hideColumns.curator">Curator</th>
            </tr>
          </thead>
          <tbody>
            <tr annotation-table-row add-links="addLinks()"
                annotation-type-name="ontology"
                feature-status-filter="{{featureStatusFilter}}"
                ng-repeat="annotation in data.sortedAnnotations">
            </tr>
          </tbody>
        </table>
        <table ng-switch-when="interaction" class="list">
          <thead>
            <tr>
              <th>
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('feature_a_display_name')">
                  <img ng-if="sortColumn == 'feature_a_display_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Interactor A
                </a>
              </th>
              <th ng-if="multiOrganismMode">Taxon Id A</th>
              <th ng-if="!data.hideColumns.evidence_code">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('evidence')">
                  <img ng-if="sortColumn == 'evidence'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Evidence
                </a>
              </th>
              <th ng-if="annotationType.can_have_conditions && !data.hideColumns.conditions">Conditions</th>
              <th>
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('feature_b_display_name')">
                  <img ng-if="sortColumn == 'feature_b_display_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Interactor B
                </a>
              </th>
              <th ng-if="multiOrganismMode">Taxon Id B</th>
              <th ng-if="showInteractionTermColumns">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('term_ontid')">
                  <img ng-if="sortColumn == 'term_ontid'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Term ID
                </a>
              </th>
              <th ng-if="showInteractionTermColumns">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('term_name')">
                  <img ng-if="sortColumn == 'term_name'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  Phenotype
                </a>
              </th>
              <th ng-if="!data.hideColumns.extension">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('extension')">
                  <img ng-if="sortColumn == 'extension'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  <span ng-show="flyBaseMode">Phenotype extensions</span>
                  <span ng-hide="flyBaseMode">Annotation extension</span>
                </a>
              </th>
              <th ng-if="!data.hideColumns.qualifiers">Qualifiers</th>
              <th ng-if="!data.hideColumns.submitter_comment">
                <a class="curs-sort-button" href=""
                   title="Click to sort" ng-click="setSortBy('submitter_comment')">
                  <img ng-if="sortColumn == 'submitter_comment'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                  comment
                </a>
              </th>
              <th ng-if="!data.hideColumns.figure" ng-click="setSortBy('figure')">
                <img ng-if="sortColumn == 'figure'" ng-src="{{app_static_path + '/images/descending.png'}}"></img>
                Figure</th>
              <th ng-if="!data.hideColumns.curator">Curator</th>
            </tr>
          </thead>
          <tbody>
            <tr annotation-table-row annotation-type-name="interaction"
                feature-status-filter="{{featureStatusFilter}}"
                ng-repeat="annotation in data.sortedAnnotations">
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
